
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>SIMID Overlay</title>
<style>
@font-face{
  font-family:'NotoMusic';
  src:url('https://fonts.gstatic.com/s/notomusic/v26/pe0oMI2Gpcpiyz1o4LOa4g.ttf') format('truetype');
}
html,body{margin:0;padding:0;background:transparent}
#banner{position:absolute;bottom:8%;left:5%;right:5%;padding:16px;background:rgba(0,0,0,0.5);color:#fff;font-size:2vw;border-radius:8px;text-align:center;font-family:NotoMusic,Arial,Helvetica,sans-serif}
</style>
</head>
<body>
<div id="banner">Visit beautiful coastal Maine this summer!</div>
<script>
(() => {
  const banner = document.getElementById('banner');
  let lastTime = -1;

  const post = (obj) => parent.postMessage(obj, '*');

  window.addEventListener('message', (e) => {
    const { data } = e;
    if (!data || typeof data !== 'object') return;
    switch (data.type) {
      case 'playerInit':
        post({ type: 'creativeInit', success: true });
        break;
      case 'initAck':
        // player confirmed handshake
        break;
      case 'timeUpdate':
        sync(data.currentTime, data.duration);
        break;
      case 'pause':
        banner.style.opacity = '0.5';
        break;
      case 'resume':
        banner.style.opacity = '1';
        break;
      case 'volumeChange':
        break;
    }
  });

  /* simple example sync */
  function sync(current, duration) {
    if (duration && current > duration - 3 && lastTime <= duration - 3) {
      banner.textContent = 'Thanks for watching!';
    }
    lastTime = current;
  }
})();
</script>
</body>
</html>
